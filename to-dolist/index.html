<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="./index.css" />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"
      integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm"
      crossorigin="anonymous"
    />
    <title>To do List</title>
  </head>
  <body>
    <header class="header__logo"><h1>To do List</h1></header>
    <nav class="options">
      <button class="options__today">오늘만 보기</button>
      <button class="options__tomorrow">내일만 보기</button>
      <button class="options__both">함께 보기</button>
    </nav>
    <main>
      <section class="todos__today todos open">
        <h2 class="todos__header">시형이가 할 일</h2>
        <ul class="todos__items">
          <li class="todos__item">
            <span class="todos__name">자료구조 공부하기</span>
            <button class="todos__delete"><i class="fas fa-trash"></i></button>
          </li>
          <li class="todos__item">
            <span class="todos__name">레이아웃 디자인 짜기</span>
            <button class="todos__delete"><i class="fas fa-trash"></i></button>
          </li>
          <li class="todos__item">
            <span class="todos__name">sopt 과제 뿌시기</span>
            <button class="todos__delete"><i class="fas fa-trash"></i></button>
          </li>
        </ul>
        <div class="todo__input-box">
          <input class="todos__input" type="text" />
          <button class="todos__add">
            <i class="fas fa-plus-circle"></i>
          </button>
        </div>
      </section>
      <section class="todos__tomorrow todos open">
        <h2 class="todos__header">내일 할 일</h2>
        <ul class="todos__items">
          <li class="todos__item">
            <span class="todos__name">react로 컴포넌트 만들어보기</span>
            <button class="todos__delete"><i class="fas fa-trash"></i></button>
          </li>
          <li class="todos__item">
            <span class="todos__name">javascript 스터디 커리큘럼 찾아보기</span>
            <button class="todos__delete"><i class="fas fa-trash"></i></button>
          </li>
        </ul>
        <div class="todo__input-box">
          <input class="todos__input" type="text" />
          <button class="todos__add">
            <i class="fas fa-plus-circle"></i>
          </button>
        </div>
      </section>
    </main>
    <footer class="footer">SOPT 29th Web Part</footer>
  </body>

  <script>
    "use strict";

    //1. plus 버튼 클릭하면 투두리스트 추가
    //2. input에서 enter 눌러도 투두리스트 추가
    //3. delete 버튼 누르면 투두리스트 제거
    //4. 오늘 할 일, 내일 할 일 필터링

    // const tomorrowTodo = document.querySelector('.todos__tomorrow');
    // const todayTodo = document.querySelector('.todos__today');

    // function todayOpen() {
    //   tomorrowTodo.style.display = 'none';
    //   todayTodo.style.display = 'flex';
    //   }

    // function tomorrowOpen() {
    //   tomorrowTodo.style.display = 'flex';
    //   todayTodo.style.display = 'none';
    // }

    // function bothOpen() {
    //   tomorrowTodo.style.display = 'flex';
    //   todayTodo.style.display = 'flex';
    // }
    const nav = document.querySelector("nav");
    const Todos = document.querySelectorAll(".todos");

    nav.addEventListener("click", (e) => {
      if (e.target.tagName !== "BUTTON") return; //nav빈공간 눌렀을 땐 아무 변경 X

      //switch문으로 3가지 버튼 한버에 관리하기
      switch (e.target.className) {
        case "options__today":
          Todos[1].classList.remove("open");
          Todos[0].classList.add("open");
          break;
        case "options__tomorrow":
          Todos[0].classList.remove("open");
          Todos[1].classList.add("open");
          break;
        case "options__both":
          Todos[0].classList.add("open");
          Todos[1].classList.add("open");
          break;
      }
    });

    const deleteBtns = document.querySelectorAll(".todos__delete");
    const addInputs = document.querySelectorAll('.todos__input');
    const todoLists = document.querySelectorAll(".todos__item");
    //delete 버튼 구현하기
    //오늘 할 일인지, 내일 할 일인지, 몇 번째 항목인지 알아야 함.
    deleteBtns.forEach((btn, i) => { 
      btn.addEventListener("click", () => todoLists[i].remove())
    });

    // 플러스 버튼 누를 때 추가되게 하기
    const plusBtns = document.querySelector('.todos__add');

    //plusBtn눌렀을 때 addTodo함수 실행되게 하기
    plusBtns.forEach((btn, index) => {
      btn.addEventListener("click", () => addTodo(index))
    });

    //enter쳤을 때 addTodo함수 실행되게 하기
    inputs.forEach((input, index) => {
      input.addEventListener("keyup", (e) => {
        if (e.key == "Enter") {
          addTodo(index);
        }
      })
    });

    //addTodo함수 ( 새로운 todo list 추가시키는 함수)
    function addTodo(text, index) {
      const li = document.createElement("li");
      const span = document.createElement("span");
      const deleteIcon = document.createElement("i");
      const deleteBtn = document.createElement("button");

      deleteIcon.setAttribute("class", "fas fa-trash");
      deleteBtn.appendChild(deleteIcon);
      span.innerText = text;
      li.appendChild(span);
      li.appendChild(deleteIcon);

    }
    
  </script>
</html>
